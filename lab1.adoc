= Лабораторная работа №1
Долгов К.М. <КЭ-413>
:description: Лабораторная работа №1
:toc:
:toc-title: Оглавление
:figure-caption: Рисунок
:table-caption: Таблица

== Процесс разработки ПО
Процесс разработки программного обеспечения включает в себя несколько этапов:

* Анализ требований

Анализ требований является самым важным этапом при разработке ПО. В ходе данного этапа определяются все требования, представленные заказчиком в ТЗ, а также уточняются некоторые аспекты ПО, о которых не было упомянуто в техническом задании, либо объяснение было не очевидным. Важность  этого этапа заключается в том, что при правильном понимании требований заказчика можно избежать множественных исправлений программы на поздних этапах разработки.

* Проектирование ПО

На этапе проектирования создается архитектура программного обеспечения, определяющая основные его компоненты и их взаимодействие друг с другом. Кроме того, на этапе проектирования выбираются технологии разработки, такие как среда разработки, а также язык программирования.

* Кодирование

Кодирование - это написание исходного кода ПО на выбранном языке программирования в соответствии с разработанной архитектурой. При условии, что этапы анализа требований и проектирования ПО были выполнены качественно, кодирование будет осуществлятся довольно просто.

* Тестирование

Заключительный этап разработки ПО - это тестирование. Оно позволяет првоерить работоспособность разработанных программ, а также исправляются ошибки.

== Компиляция кода, линковка и загрузка

Для того, чтобы исходный код программы можно было запускать на микроконтроллере, он должен быть преобразован соответствующим образом.

Обработка кода происходит в три этапа:

. компиляция;
. компоновка (линковка);
. загрузка.

=== Компиляция

Компиляцию осуществляет компилятор. Он выполняет следующие задачи:

* проверяет код на корректность синтаксиса;

* если программа написана без ошибок, компилятор преобразует исходный код в объектные файлы (формат .o или .obj).

Кроме того, помимо объектных файлов компилятор способен формировать файлы библиотек, которые затем можно использовать в других программах.

=== Компоновка (линковка)

Далее сгенерированные объектные файлы (а также внешние библиотеки) и конфигурационный файл микроконтроллера, описывающий настройки по размещению кода и данных в адресном пространстве, с помощью линковщика объединяются друг с другом в единый файл (например, формата .elf или .hex). Сгенерированный файл и будет являтся прошивкой микроконтроллера.

=== Загрузка

Подготовленный файл прошивки (.elf или .hex) с помощью программатора загружается в ПЗУ микроконтроллера.

На рисунке ниже показан процесс сборки проекта в целом.

.Процесс сборки проекта
image::https://habrastorage.org/r/w1560/webt/id/0s/xm/id0sxmwokoe3bwrnmxltrhtu4si.png[]

== Запуск кода на микроконтроллере

Действия пользователя, которые программна должна выполнять, описываются в функции main(). Однако, до начала выполнения данной функции микроконтроллер осуществляет следующие действия:

. инициализация стека;
. инициализация переменных;
. непосредственно вызов функции main().

=== Инициализация стека

Стек в микроконтроллерах - это область памяти, выделенная для запоминания адресов возврата из процедур обработки прерывания и подпрограмм. Иными словами, если в ходе работы программы возникло прерывание, то адрес, на котором это прерывание возникло, сохраняется в стек на время его обработки. По завершении обработки прерывания программа возвращается на адрес, записанный в стеке, и продолжает свое выполнение, а данный адрес из стека удаляется.

Стек заполняется от старших разрядов к младшим, а переполнение стека может привести к потере данных.

Процесс инициализации стека в микроконтроллере происходит следующим образом. После подачи питания на микроконтроллер регистр адреса команд указывает на нулевой адрес, на котором находится таблица векторов прерываний. По начальному векторы таблицы находится команда инициализации указателя стека на конечный адрес стека, т.е. таким образом происходит определение размера стека. После определения размера стека выполняется функция инициализации стека.

=== Инициализация переменных